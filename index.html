<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‡´é˜¿ä½³å®å®</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">

    <style>
        /* --- 1. åŸºç¡€æ ·å¼ --- */
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: linear-gradient(to bottom, #ffdee9 0%, #b5fffc 100%); font-family: 'ZCOOL KuaiLe', cursive; }
        #canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        /* --- 2. å†…å®¹å®¹å™¨ --- */
        .container { 
            position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); 
            z-index: 10; text-align: center; width: 100%; user-select: none; 
            -webkit-tap-highlight-color: transparent; 
        }

        h1 { color: #ff5e78; font-size: 3.5rem; line-height: 1.4; margin: 0; text-shadow: 2px 2px 0px #fff, 4px 4px 10px rgba(255, 94, 120, 0.3); cursor: pointer; transition: transform 0.1s; }
        h2 { color: #ff99ac; font-size: 2rem; margin-top: 10px; font-weight: normal; }
        
        /* --- 3. æ­Œè¯æ æ ·å¼ --- */
        .lyric-box { 
            margin-top: 30px; 
            height: 50px; 
            color: #5577aa; 
            font-size: 1.3rem; 
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8); 
            transition: opacity 0.3s; 
            opacity: 1; 
            font-weight: bold; 
            padding: 0 10px;
        }

        /* --- 4. å¿ƒåŠ¨æ–‡æ¡ˆæœºæ ·å¼ (æ–°åŠŸèƒ½) --- */
        #love-quote {
            margin-top: 15px;
            color: #ff99ac;
            font-size: 1.1rem; 
            height: 30px;
            transition: opacity 1s;
        }

        /* --- 5. éŸ³ä¹æŒ‰é’® --- */
        .music-btn { position: fixed; top: 20px; right: 20px; z-index: 999; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.6); border-radius: 50%; border: 2px solid #ff5e78; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 0 10px rgba(255, 94, 120, 0.3); }
        .rotate { animation: spin 3s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .music-icon { width: 20px; height: 20px; fill: #ff5e78; }
        
        /* --- 6. åŠ¨ç”»ç‰¹æ•ˆ --- */
        .jelly { animation: jelly 0.6s; }
        @keyframes jelly { 0%, 100% { transform: scale(1, 1); } 25% { transform: scale(0.9, 1.1); } 50% { transform: scale(1.1, 0.9); } 75% { transform: scale(0.95, 1.05); } }
        
        /* æ‰‹æœºé€‚é… */
        @media (max-width: 768px) { h1 { font-size: 2.8rem; } h2 { font-size: 1.5rem; } .lyric-box { font-size: 1.1rem; } #love-quote { font-size: 1rem; } }
        .hint { position: absolute; bottom: 20px; width: 100%; text-align: center; color: #aaa; font-size: 0.8rem; z-index: 5; opacity: 0.7; }
    </style>
</head>
<body>

    <audio id="bgm" loop>
        <source src="love.mp3" type="audio/mpeg">
    </audio>

    <div class="music-btn rotate" id="musicBtn" onclick="toggleMusic()">
        <svg class="music-icon" viewBox="0 0 24 24">
            <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
        </svg>
    </div>

    <canvas id="canvas"></canvas>

    <div class="container">
        <h1 id="main-text" onclick="bounce(this)">é˜¿ä½³å®å®</h1>
        <h2 onclick="bounce(this)">æˆ‘çˆ±ä½ </h2>
        
        <div class="lyric-box" id="lyric-display">â™ª éŸ³ä¹åŠ è½½ä¸­...</div>
        
        <div id="love-quote">â¤ æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±</div>
    </div>

    <div class="hint">ç‚¹å‡»å±å¹•å¼€å¯æƒŠå–œ</div>

    <script>
        // ==========================================
        //  ğŸ‘‡ 1. æ­Œè¯éƒ¨åˆ† (å·²å¸®ä½ æ›¿æ¢å¥½è¡¨ç™½å¼€åœº)
        // ==========================================
        const lrcFileContent = `
[00:00.00]To: æœ€çˆ±çš„é˜¿ä½³å®å®
[00:01.00]è¿™æ˜¯ä¸€é¦–åªå±äºä½ çš„æ­Œ
[00:02.00]å‡†å¤‡å¥½æ¥æ”¶æˆ‘çš„çˆ±æ„äº†å—
[00:03.00]æˆ‘ä»¬çš„æ•…äº‹ï¼Œå¼€å§‹å•°...
[00:03.46]çˆ±æƒ…æœ‰ç´«è‰²çº¢è‰²è“è‰²ç™½è‰²å››ç§é¢œè‰²
[00:09.05]ç»˜ç”»å‡ºæ‹çˆ±ä¸­ç»šçƒ‚çš„ä¸–ç•Œ
[00:27.11]å¼€å§‹çš„æ—¶å€™
[00:29.86]ç‰µä½ çš„æ‰‹éƒ½ä¼šé¢¤æŠ–
[00:33.52]æˆ‘æŠŠè¿™ç§æ„Ÿè§‰å«åšç´«è‰²
[00:39.84]ç»ˆäºæ…¢æ…¢çš„ç†Ÿæ‚‰äº†
[00:43.14]ä¸–ç•Œåªå‰©ä½ å’Œæˆ‘
[00:46.04]åªæœ‰çº¢è‰²è¡¨è¾¾çš„é€å½»
[00:51.8]æœ‰æ—¶æˆ‘ä¹Ÿä¼šæœ‰è“è‰²çš„å°è„¾æ°”
[00:57.66]åªè¦ä½ èƒ½æ¥å—è¿™ç‚¹å°æƒ…ç»ª
[01:03.32]æˆ‘æ„¿ä¸ºä½ ç©¿ä¸Šæ°¸æ’çš„ç™½è‰²å©šçº±
[01:09.35]çˆ±æƒ…æœ‰ç´«è‰²çº¢è‰²è“è‰²ç™½è‰²å››ç§é¢œè‰²
[01:15.2]ç»˜ç”»å‡ºæ‹çˆ±ä¸­ç»šçƒ‚çš„ä¸–ç•Œ
[01:21.76]ç´«è‰²æ˜¯ç¾å¥½çš„
[01:25.38]çº¢è‰²çƒ­çƒˆ
[01:27.69]è“è‰²ä¸å¯é¿å…
[01:29.76]ç™½è‰²å¯å¦èƒ½é•¿ä¸€äº›
[01:33.119995]çˆ±æƒ…æœ‰ç´«è‰²çº¢è‰²è“è‰²ç™½è‰²å››ç§é¢œè‰²
[01:39.17]æ¯ç§éƒ½ä»£è¡¨æˆ‘å¯¹ä½ çš„æ„Ÿè§‰
[01:45.6]ä¹Ÿè®¸æˆ‘ä»¬æœ‰ä¸ç”Ÿä¿±æ¥çš„å·®åˆ«
[01:51.55]ä½†ä½ çš„ä¸€åˆ‡æˆ‘äº†è§£
[02:06.75]æœ‰æ—¶æˆ‘ä¹Ÿä¼šæœ‰è“è‰²çš„å°è„¾æ°”
[02:12.69]åªè¦ä½ èƒ½æ¥å—è¿™ç‚¹å°æƒ…ç»ª
[02:18.19]æˆ‘æ„¿ä¸ºä½ ç©¿ä¸Šæ°¸æ’çš„ç™½è‰²å©šçº±
[02:24.28]çˆ±æƒ…æœ‰ç´«è‰²çº¢è‰²è“è‰²ç™½è‰²å››ç§é¢œè‰²
[02:30.19]ç»˜ç”»å‡ºæ‹çˆ±ä¸­ç»šçƒ‚çš„ä¸–ç•Œ
[02:37.15]ç´«è‰²æ˜¯ç¾å¥½çš„
[02:40.33]çº¢è‰²çƒ­çƒˆ
[02:42.73]è“è‰²ä¸å¯é¿å…
[02:44.73]ç™½è‰²å¯å¦èƒ½é•¿ä¸€äº›
[02:48.31]çˆ±æƒ…æœ‰ç´«è‰²çº¢è‰²è“è‰²ç™½è‰²å››ç§é¢œè‰²
[02:54.14]æ¯ç§éƒ½ä»£è¡¨æˆ‘å¯¹ä½ çš„æ„Ÿè§‰
[03:00.74]ä¹Ÿè®¸æˆ‘ä»¬æœ‰ä¸ç”Ÿä¿±æ¥çš„å·®åˆ«
[03:06.48]ä½†ä½ çš„ä¸€åˆ‡æˆ‘äº†è§£
[03:12.46]ä½†ä½ çš„ä¸€åˆ‡æˆ‘äº†è§£
`;

        // ==========================================
        //  ğŸ‘‡ 2. å¿ƒåŠ¨æ–‡æ¡ˆæœº (è‡ªåŠ¨åˆ‡æ¢æƒ…è¯)
        // ==========================================
        const loveQuotes = [
            "æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±",
            "å–œæ¬¢ä½ ï¼Œæ²¡æœ‰ç†ç”±ï¼Œä¹Ÿæ²¡æœ‰æœŸé™",
            "ä¸‡ç‰©çš†ç”œï¼Œè€Œä½ èƒœè¿‡ä¸‡ç‰©",
            "ä½ æ˜¯æˆ‘æ‰€æœ‰çš„æ¸©æŸ”å¿ƒäº‹",
            "ä¸ç”¨å€’æ•°æ—¥å­ï¼Œå› ä¸ºæ¯ä¸€å¤©éƒ½çˆ±ä½ ",
            "é‡è§ä½ ï¼Œæ‰€æœ‰æ˜Ÿæ˜Ÿéƒ½è½åˆ°äº†æˆ‘å¤´ä¸Š",
            "æ™“çœ‹å¤©è‰²æš®çœ‹äº‘ï¼Œè¡Œä¹Ÿæ€å›ï¼Œåä¹Ÿæ€å›",
            "å¿ƒè·³çš„å£°éŸ³ï¼Œåªæœ‰ä½ èƒ½å¬æ‡‚",
            "ä¸–ç•Œä¸Šç¾å¥½çš„ä¸œè¥¿ä¸å¤šï¼Œç«‹ç§‹å‚æ™šå¹æ¥çš„é£ï¼Œå’Œç¬‘èµ·æ¥çš„ä½ "
        ];
        
        let quoteIndex = 0;
        const quoteDiv = document.getElementById("love-quote");
        
        setInterval(() => {
            quoteDiv.style.opacity = 0; // æ·¡å‡º
            setTimeout(() => {
                quoteIndex = (quoteIndex + 1) % loveQuotes.length;
                quoteDiv.innerText = "â¤ " + loveQuotes[quoteIndex];
                quoteDiv.style.opacity = 1; // æ·¡å…¥
            }, 1000);
        }, 4000); // 4ç§’æ¢ä¸€æ¬¡

        // ==========================================
        //  ğŸ‘‡ 3. æ ¸å¿ƒåŠŸèƒ½é€»è¾‘ (æ— éœ€ä¿®æ”¹)
        // ==========================================
        
        // --- å¼ºåŠ› LRC è§£æå™¨ ---
        function parseLrc(lrc) {
            if (!lrc) return [];
            const lines = lrc.split('\n');
            const result = [];
            for (let line of lines) {
                const match = line.match(/\[(\d+):(\d+)(\.\d+)?\](.*)/);
                if (match) {
                    const min = parseInt(match[1]);
                    const sec = parseInt(match[2]);
                    const ms = match[3] ? parseFloat(match[3]) : 0;
                    const text = match[4].trim(); 
                    const time = min * 60 + sec + ms;
                    if (text) result.push({ time, text });
                }
            }
            return result;
        }

        const lyricData = parseLrc(lrcFileContent);
        const lyricDisplay = document.getElementById('lyric-display');

        // --- æ­Œè¯åŒæ­¥ ---
        const audio = document.getElementById('bgm');
        audio.addEventListener('timeupdate', function() {
            const currentTime = audio.currentTime;
            let currentText = "â™ª"; 
            for (let i = lyricData.length - 1; i >= 0; i--) {
                if (currentTime >= lyricData[i].time) {
                    currentText = lyricData[i].text;
                    break;
                }
            }
            if (lyricDisplay.innerText !== currentText) {
                lyricDisplay.style.opacity = 0;
                setTimeout(() => {
                    lyricDisplay.innerText = currentText;
                    lyricDisplay.style.opacity = 1;
                }, 150);
            }
        });

        // --- éŸ³ä¹æ§åˆ¶ ---
        const musicBtn = document.getElementById('musicBtn');
        let isPlaying = false; 

        window.addEventListener('load', () => {
             audio.play().catch(() => {
                 lyricDisplay.innerText = "ç‚¹å‡»å±å¹•æ’­æ”¾éŸ³ä¹ â™ª";
             });
        });

        document.body.addEventListener('click', function() {
            if (!isPlaying) {
                audio.play();
                isPlaying = true;
                musicBtn.classList.add('rotate');
            }
        }, { once: true });

        function toggleMusic() {
            if (isPlaying) {
                audio.pause();
                musicBtn.classList.remove('rotate');
            } else {
                audio.play();
                musicBtn.classList.add('rotate');
            }
            isPlaying = !isPlaying;
            event.stopPropagation();
        }

        // --- èƒŒæ™¯ç‰¹æ•ˆ ---
        function bounce(element) {
            element.classList.remove('jelly');
            void element.offsetWidth;
            element.classList.add('jelly');
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            for(let i=0; i<10; i++) { createHeart(centerX, centerY); }
        }

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height, hearts = [];
        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        
        class Heart {
            constructor(x, y) {
                this.x = x; this.y = y; this.size = Math.random() * 15 + 5;
                this.speedX = Math.random() * 4 - 2; this.speedY = Math.random() * -3 - 1;
                this.color = `hsla(${Math.random() * 60 + 330}, 100%, 70%, 1)`; this.life = 1; this.decay = Math.random() * 0.02 + 0.01;
            }
            update() { this.x += this.speedX; this.y += this.speedY; this.size -= 0.1; this.life -= this.decay; }
            draw() {
                ctx.fillStyle = this.color; ctx.globalAlpha = this.life; ctx.beginPath();
                let topCurveHeight = this.size * 0.3;
                ctx.moveTo(this.x, this.y + topCurveHeight);
                ctx.bezierCurveTo(this.x, this.y, this.x - this.size / 2, this.y, this.x - this.size / 2, this.y + topCurveHeight);
                ctx.bezierCurveTo(this.x - this.size / 2, this.y + (this.size + topCurveHeight) / 2, this.x, this.y + (this.size + topCurveHeight) / 2 + topCurveHeight, this.x, this.y + this.size);
                ctx.bezierCurveTo(this.x, this.y + (this.size + topCurveHeight) / 2 + topCurveHeight, this.x + this.size / 2, this.y + (this.size + topCurveHeight) / 2, this.x + this.size / 2, this.y + topCurveHeight);
                ctx.bezierCurveTo(this.x + this.size / 2, this.y, this.x, this.y, this.x, this.y + topCurveHeight);
                ctx.fill(); ctx.globalAlpha = 1;
            }
        }
        function createHeart(x, y) { hearts.push(new Heart(x, y)); }
        function animate() { ctx.clearRect(0, 0, width, height); for (let i = 0; i < hearts.length; i++) { hearts[i].update(); hearts[i].draw(); if (hearts[i].life <= 0 || hearts[i].size <= 0) { hearts.splice(i, 1); i--; } } requestAnimationFrame(animate); }
        animate();
        window.addEventListener('mousemove', (e) => { createHeart(e.clientX, e.clientY); });
        window.addEventListener('touchmove', (e) => { e.preventDefault(); for (let i = 0; i < e.touches.length; i++) { createHeart(e.touches[i].clientX, e.touches[i].clientY); } }, { passive: false });
        setInterval(() => { createHeart(Math.random() * width, height + 20); }, 500);
    </script>
</body>
</html>
